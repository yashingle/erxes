<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.66">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-87254317-8","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="erxes" href="/opensearch.xml"><title data-react-helmet="true">CE Step by Step Installation | erxes</title><meta data-react-helmet="true" property="og:image" content="https://www.erxes.org/img/erxes.png"><meta data-react-helmet="true" property="twitter:image" content="https://www.erxes.org/img/erxes.png"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for erxes"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="CE Step by Step Installation | erxes"><meta data-react-helmet="true" name="description" content="Installing the Community Edition"><meta data-react-helmet="true" property="og:description" content="Installing the Community Edition"><meta data-react-helmet="true" property="og:url" content="https://www.erxes.org/installation/ubuntu-step-by-step"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://www.erxes.org/installation/ubuntu-step-by-step"><link rel="stylesheet" href="/styles.7b2de4d9.css">
<link rel="preload" href="/styles.f79eea94.js" as="script">
<link rel="preload" href="/runtime~main.0d04a286.js" as="script">
<link rel="preload" href="/main.0324d8bb.js" as="script">
<link rel="preload" href="/1.6cbf34a8.js" as="script">
<link rel="preload" href="/2.09dfe545.js" as="script">
<link rel="preload" href="/0148e278.f240f260.js" as="script">
<link rel="preload" href="/01a85c17.49a0c86e.js" as="script">
<link rel="preload" href="/073c8191.9acc6f27.js" as="script">
<link rel="preload" href="/0b5952ed.d2151753.js" as="script">
<link rel="preload" href="/650081ca.dd062294.js" as="script">
<link rel="preload" href="/6875c492.02102129.js" as="script">
<link rel="preload" href="/a6aa9e1f.bd0ede83.js" as="script">
<link rel="preload" href="/ab53c634.3d0aed51.js" as="script">
<link rel="preload" href="/c4f5d8e4.dc86f455.js" as="script">
<link rel="preload" href="/ccc49370.5ac238c3.js" as="script">
<link rel="preload" href="/84.81d30d46.js" as="script">
<link rel="preload" href="/83.ca7809d5.js" as="script">
<link rel="preload" href="/935f2afb.eb387ee5.js" as="script">
<link rel="preload" href="/17896441.e69f0c76.js" as="script">
<link rel="preload" href="/0f1107fe.48fbf937.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo_dark.svg" alt="erxes logo"></a><a class="navbar__item navbar__link" href="/overview/getting-started/">Documentation</a><a class="navbar__item navbar__link" href="/user/subscription-getting-started">Tutorial</a><a class="navbar__item navbar__link" href="/invest">Invest</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/erxes/erxes" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link github-button hide-mobile" data-show-count="true" data-size="large" aria-label="Star erxes/erxes on GitHub">Star</a><a href="https://github.com/erxes/erxes" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><a class="navbar__item navbar__link" href="/blog/">Blog</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo_dark.svg" alt="erxes logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/overview/getting-started/">Documentation</a></li><li class="menu__list-item"><a class="menu__link" href="/user/subscription-getting-started">Tutorial</a></li><li class="menu__list-item"><a class="menu__link" href="/invest">Invest</a></li><li class="menu__list-item"><a href="https://github.com/erxes/erxes" target="_blank" rel="noopener noreferrer" class="menu__link github-button hide-mobile" data-show-count="true" data-size="large" aria-label="Star erxes/erxes on GitHub">Star</a></li><li class="menu__list-item"><a href="https://github.com/erxes/erxes" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a class="menu__link" href="/blog/">Blog</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Overview</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/overview/getting-started">Getting  Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/overview/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/overview/architecture-overview">Architecture Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/overview/deployment-overview">Deployment Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/overview/integrations-overview">Integrations Overview</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Installation Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Ubuntu</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/installation/ubuntu">Ubuntu 18.04</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Installation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/installation/ubuntu-quickstart">CE Quick Start Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/installation/upgrade-minimal-server">Upgrade from Minimum Server</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/installation/ubuntu-step-by-step">CE Step by Step Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/installation/dns-configuration">How to configure your DNS records</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/installation/ubuntu-troubleshooting">Troubleshooting Ubuntu Installation</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/installation/aws">AWS Marketplace</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/installation/digitalocean">DigitalOcean Marketplace</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/installation/docker">Docker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/installation/heroku">Heroku</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/installation/upgrade">Upgrade</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Administrator&#x27;s Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/administrator/creating-first-user">Creating first user</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/administrator/environment-variables">Environment variables</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/administrator/system-config">System config</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/administrator/migration">Migration</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Developer&#x27;s Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/developer/developer">Developer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/developer/contributing">Contributing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/developer/graphql-api">GraphQL API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/developer/push-notifications">Push notifications</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/developer/android-sdk">Android SDK</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/developer/ios-sdk">iOS SDK</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/developer/troubleshooting">Troubleshooting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/developer/documentation_guide">Documentation Guide</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">CE Step by Step Installation</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="installing-the-community-edition"></a>Installing the Community Edition<a aria-hidden="true" tabindex="-1" class="hash-link" href="#installing-the-community-edition" title="Direct link to heading">#</a></h2><p>The following instructions take you through <strong>step by step</strong> and have you install <strong>erxes</strong> on a brand new <strong>Ubuntu 18.04</strong> server.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>These instructions assume a minimum of <strong>4 CPUs or more</strong> and <strong>8GB RAM or more</strong> on your server.</p></div></div><p>This guide shows each step to install the depencies necessary to run <strong>erxes</strong>. Developers can follow these steps for a new server installation or to understand installing <strong>erxes</strong> on an existing server.</p><p>The following installation steps work on <strong>Ubuntu 18.04</strong> servers as hosted by companies like <a href="https://digitalocean.com" target="_blank" rel="noopener noreferrer">Digital Ocean</a>, <a href="https://linode.com" target="_blank" rel="noopener noreferrer">Linode</a> and <a href="https://vultr.com" target="_blank" rel="noopener noreferrer">Vultr</a>. The instructions do <strong>not</strong> work on <strong><em>Amazon EC2 instances</em></strong>.</p><p>For most developers, the <a href="/installation/ubuntu-quickstart">Quick Start Installation</a> is better.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Upgrading from a Minimum Server</h5></div><div class="admonition-content"><p>These steps are <strong>not</strong> the correct steps to <em>upgrade an existing installation</em> to a <strong>Recommended</strong> Server installation with more memory and CPU power. Please follow instructions here in how to <a href="/installation/upgrade-minimal-server">Upgrade from a Minimum Server</a>.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="setting-up-a-server-with-ubuntu-1804"></a>Setting up a server with Ubuntu 18.04<a aria-hidden="true" tabindex="-1" class="hash-link" href="#setting-up-a-server-with-ubuntu-1804" title="Direct link to heading">#</a></h2><p>You must have an account with your hosting provider prior to doing these steps.</p><p>Create an instance of a server running <strong>Ubuntu 18.04</strong>. (You should have the ability to to <strong>SSH</strong> into the server.)</p><p>You will need to point your domain or subdomain name to your new server. You can read a guide on how to configure your domain <a href="/installation/ubuntu-quickstart#configure-your-dns-records-to-point-at-your-server">here</a>.</p><ul><li>Choose a server with the starting <strong>Recommended server</strong> requirements:<ul><li><strong>4 CPUs or more</strong></li><li><strong>8GB RAM or more</strong></li></ul></li></ul><p>After setting up your server, continue with the instructions below.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="log-into-server-as-root-and-create-erxes-user"></a>Log into server as root and create erxes user<a aria-hidden="true" tabindex="-1" class="hash-link" href="#log-into-server-as-root-and-create-erxes-user" title="Direct link to heading">#</a></h2><p>Open the terminal or command prompt on your computer. You will need your <strong>IP address</strong>. (In this example, <strong>44.123.32.12</strong>). Type <code>yes</code>, when asked if you want to continue connecting.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># example ssh root@44.123.32.12</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">ssh</span><span class="token plain"> root@your-ip-address</span></div></div></div></div></div><p>(<strong>Note</strong>: Some people get an error, <strong>WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!</strong>, please see the solution <a href="/installation/ubuntu-troubleshooting">here</a>.)</p><p>You don&#x27;t want to use the <strong>root</strong> user to administer your server. So everything will be done by a user called, <strong>erxes</strong>. To accomplish this, run the following commands:</p><p>Add a user called &quot;erxes&quot;. When prompted, enter in a <strong>unique</strong> password. You will need to keep this password available, as later operations will require using it.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">adduser erxes</span></div></div></div></div></div><p>(Finish adding the user simply by pressing the <code>enter</code> or <code>return</code> key through the questions.)</p><p>Grant the <strong>erxes</strong> user adminstrative rights.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">usermod</span><span class="token plain"> -aG </span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> erxes</span></div></div></div></div></div><p>Your next step, still as <strong>root</strong> user, is to set-up a basic firewall for your server.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="set-up-a-basic-firewall-for-ssh-nginx-80-and-port-443"></a>Set-up a basic firewall for SSH, nginx 80 and port 443<a aria-hidden="true" tabindex="-1" class="hash-link" href="#set-up-a-basic-firewall-for-ssh-nginx-80-and-port-443" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="basic-firewall---port-22"></a>Basic Firewall - Port 22<a aria-hidden="true" tabindex="-1" class="hash-link" href="#basic-firewall---port-22" title="Direct link to heading">#</a></h3><p>Allow OpenSSH with <strong>ufw</strong>. OpenSSH will use <strong>port 22</strong>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ufw allow OpenSSH</span></div></div></div></div></div><p>Enable <strong>ufw</strong></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ufw </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">enable</span></div></div></div></div></div><ul><li>Type <code>y</code> when asked, &quot;<strong>Command may disrupt existing ssh connections. Proceed with operation (y|n)?</strong>&quot;</li></ul><p>Check the <strong>ufw</strong> status</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ufw status</span></div></div></div></div></div><p>You should have an output like below:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Status: active</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">To                         Action      From</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">--                         ------      ----</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">OpenSSH                    ALLOW       Anywhere</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">OpenSSH </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">v6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">               ALLOW       Anywhere </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">v6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="http--https---port-80--port-443"></a>HTTP &amp; HTTPS - Port 80 &amp; Port 443<a aria-hidden="true" tabindex="-1" class="hash-link" href="#http--https---port-80--port-443" title="Direct link to heading">#</a></h3><p>Allow <strong>HTTP</strong> (port 80) and <strong>HTTPS</strong> (port 443) with <strong>ufw</strong></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ufw allow proto tcp from any to any port </span><span class="token number" style="color:rgb(247, 140, 108)">80,443</span></div></div></div></div></div><p>Check the ufw status</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ufw status</span></div></div></div></div></div><p>You should have an output like below:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Status: active</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">To                         Action      From</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">--                         ------      ----</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">OpenSSH                    ALLOW       Anywhere</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">80,443</span><span class="token plain">/tcp                 ALLOW       Anywhere</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">OpenSSH </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">v6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">               ALLOW       Anywhere </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">v6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">80,443</span><span class="token plain">/tcp </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">v6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">            ALLOW       Anywhere </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">v6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="allow-the-erxes-user-to-ssh-into-server"></a>Allow the &quot;erxes&quot; user to <strong>SSH</strong> into server<a aria-hidden="true" tabindex="-1" class="hash-link" href="#allow-the-erxes-user-to-ssh-into-server" title="Direct link to heading">#</a></h2><p>open the <code>sshd_config</code> file to edit</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">nano</span><span class="token plain"> /etc/ssh/ssh_config</span></div></div></div></div></div><ul><li><p>Scroll down until you see <code>PasswordAuthentication</code>. Change it from <code>PasswordAuthentication no</code> to <code>PasswordAuthentication yes</code>. <strong>NOTE</strong>: Some servers have this line commented out with a <code>#</code>, like <code># PasswordAuthentication no</code>. You will need to uncomment it by deleting the <code>#</code>.</p></li><li><p>The line should look like this:</p></li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">PasswordAuthentication </span><span class="token function" style="color:rgb(130, 170, 255)">yes</span></div></div></div></div></div><ul><li>Save and exit with <code>ctrl + x</code> and then <code>y</code> to accept the changes.</li></ul><p>Reload the SSH config file</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">service</span><span class="token plain"> sshd reload</span></div></div></div></div></div><p>Exit from server, so that you can log back in as the <strong>erxes</strong> user</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">exit</span></div></div></div></div></div><p>You have created a new user called, <strong>erxes</strong> and you set-up a basic firewall to protect your server against malicious attacks.</p><p>Please continue with the following steps to log in to your server as the <strong>erxes</strong> user.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="log-in-to-your-server-as-the-erxes-user"></a>Log in to your server as the &quot;erxes&quot; user.<a aria-hidden="true" tabindex="-1" class="hash-link" href="#log-in-to-your-server-as-the-erxes-user" title="Direct link to heading">#</a></h2><p>Before you can log into your new server, we need to <strong>add the SSH key</strong> to your <strong>local</strong> computer.</p><p><strong>NOTE:</strong> You need to use the <strong>IP address</strong> of your server.</p><ul><li>Run the following command and <strong>create a new password</strong>.</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#ssh-copy-id erxes@44.123.32.12 &lt;--- This is an example. Use your ip address</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ssh-copy-id erxes@your-IP-address</span></div></div></div></div></div><p>Now you can log into your server as the <strong>erxes</strong> user.</p><ul><li>Log back into the server as the <strong>erxes</strong> user. You will need your IP address. (In this example, <strong>44.123.32.12</strong>). Enter your previously created password, if prompted.</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># example ssh erxes@44.123.32.12 &lt;--- This is an example. Use your ip address</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">ssh</span><span class="token plain"> erxes@your-ip-address</span></div></div></div></div></div><p>In the following sections, you will install software dependencies that are needed to run <strong>erxes</strong>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="nvm-install"></a>Nvm install<a aria-hidden="true" tabindex="-1" class="hash-link" href="#nvm-install" title="Direct link to heading">#</a></h2><p><strong>Node Version Manage (nvm)</strong> is a tool that allows you to download and install <a href="https://nodejs.org/" target="_blank" rel="noopener noreferrer">Node.js</a>. You can read more about the installation process here: <a href="https://gist.github.com/d2s/372b5943bce17b964a79" target="_blank" rel="noopener noreferrer">How to install NVM</a></p><p>Install <strong>nvm</strong> and initialize by reloading the shell configuration. (Run the following commands separately.)</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.3/install.sh </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">bash</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">source</span><span class="token plain"> ~/.bashrc</span></div></div></div></div></div><p>Verify <strong>nvm</strong> is installed by running:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">nvm --version</span></div></div></div></div></div><p>You should get a similar output as below:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token number" style="color:rgb(247, 140, 108)">0.35</span><span class="token plain">.3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># your version of nvm may be different</span></div></div></div></div></div><p>You are ready to continue with installing <strong>Node.js</strong>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="install-nodejs-with-nvm"></a>Install Node.js with nvm<a aria-hidden="true" tabindex="-1" class="hash-link" href="#install-nodejs-with-nvm" title="Direct link to heading">#</a></h2><p>You can read more about installing <strong>Node.js</strong> with <strong>nvm</strong> here: <a href="https://gist.github.com/d2s/372b5943bce17b964a79#install-nodejs-with-nvm" target="_blank" rel="noopener noreferrer">How to install Node.js with NVM</a></p><p>Install <strong>Node.js</strong></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">nvm </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">12</span></div></div></div></div></div><p>Check to see if <strong>Node.js</strong> is installed correctly.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">node -v</span></div></div></div></div></div><p>You should get a similar output as below:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">v12.20.0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># your version of node.js may be different</span></div></div></div></div></div><p>With <strong>Node.js</strong> installed, you can continue with installing <strong>Yarn</strong>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="yarn-install"></a>Yarn install<a aria-hidden="true" tabindex="-1" class="hash-link" href="#yarn-install" title="Direct link to heading">#</a></h2><p><strong>Yarn</strong> is a package manager. The alternative is <a href="https://www.npmjs.com/" target="_blank" rel="noopener noreferrer">npm</a>. We recommend <a href="https://yarnpkg.com/" target="_blank" rel="noopener noreferrer">yarn</a>. For additional <a href="https://classic.yarnpkg.com/en/docs/install/#debian-stable" target="_blank" rel="noopener noreferrer">yarn installation instructions, read this</a>.</p><p>Install <strong>yarn</strong>. (Run the following commands separately.)</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> -sS https://dl.yarnpkg.com/debian/pubkey.gpg </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> apt-key </span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token plain"> -</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;deb https://dl.yarnpkg.com/debian/ stable main&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">tee</span><span class="token plain"> /etc/apt/sources.list.d/yarn.list</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">apt</span><span class="token plain"> update </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">apt</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> --no-install-recommends </span><span class="token function" style="color:rgb(130, 170, 255)">yarn</span></div></div></div></div></div><p>Check to see if <strong>yarn</strong> is installed correctly</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">yarn</span><span class="token plain"> --version</span></div></div></div></div></div><p>You should get a similar output as below:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token number" style="color:rgb(247, 140, 108)">1.22</span><span class="token plain">.5</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># your version of yarn may be different</span></div></div></div></div></div><p>As long as you received a version response to <code>yarn --version</code>, then you can continue and install <strong>MongoDB</strong>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="install-mongodb"></a>Install MongoDB<a aria-hidden="true" tabindex="-1" class="hash-link" href="#install-mongodb" title="Direct link to heading">#</a></h2><p><strong>MongoDB</strong> is a robust and general purpose document-based database. For additional <a href="https://docs.mongodb.com/manual/tutorial/install-mongodb-on-ubuntu/" target="_blank" rel="noopener noreferrer">MongoDB installation instructions, read this</a>.</p><p>Erxes supports MongoDB version 3.6+ is supported. Previous versions are not supported.</p><p>Install <strong>MongoDB</strong>. (Run the following commands separately.)</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">wget</span><span class="token plain"> -qO - https://www.mongodb.org/static/pgp/server-4.2.asc </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> apt-key </span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token plain"> -</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu bionic/mongodb-org/4.2 multiverse&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">tee</span><span class="token plain"> /etc/apt/sources.list.d/mongodb-org-4.2.list</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">apt-get</span><span class="token plain"> update</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">apt-get</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> -y mongodb-org</span></div></div></div></div></div><p>Start and enable <strong>MongoDB</strong>. (Run the following commands separately.)</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> systemctl start mongod</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> systemctl </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">enable</span><span class="token plain"> mongod</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#Created symlink /etc/systemd/system/multi-user.target.wants/mongod.service â†’ /lib/systemd/system/mongod.service.</span></div></div></div></div></div><ul><li>Check to see if <strong>MongoDB</strong> is installed correctly</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mongod --version</span></div></div></div></div></div><p>As long as you received a version response to <code>mongod --version</code>, then you can continue below.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="deploy-a-mongodb-replica-set"></a>Deploy a MongoDB Replica Set<a aria-hidden="true" tabindex="-1" class="hash-link" href="#deploy-a-mongodb-replica-set" title="Direct link to heading">#</a></h3><p>MongoDB <a href="https://docs.mongodb.com/manual/reference/glossary/#term-replica-set" target="_blank" rel="noopener noreferrer">replica sets</a> add an extra layer of redundancy and help with load balancing. They are a group of <strong>mongod processes</strong> that maintain matching data sets. You can read about <strong>replication</strong> <a href="https://docs.mongodb.com/manual/replication/" target="_blank" rel="noopener noreferrer">here</a>.</p><p>Stop the <strong>mongod</strong> processes</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> systemctl stop mongod</span></div></div></div></div></div><p>Open <strong>mongod.conf</strong></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">nano</span><span class="token plain"> /etc/mongod.conf</span></div></div></div></div></div><p>Enable the <strong>replicaset</strong> settings, by searching for <code>#replication</code>. Remove the <code>#</code> to activate it and edit to include the set name, as follows:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">replication:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  replSetName: </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;rs0&quot;</span></div></div></div></div></div><ul><li>Save and Exit with <code>ctrl + x</code> and then <code>y</code> to accept the changes.</li></ul><p>Restart mongob</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> systemctl start mongod</span></div></div></div></div></div><p>Connect to mongo shell</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mongo</span></div></div></div></div></div><p>Initialize replicaSet</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">rs.initiate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><ul><li>You should have an output similar to below. Verify <strong>SECONDARY</strong> changes to <strong>Primary</strong> by pressing enter several times.</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;info2&quot;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;no configuration specified. Using a default configuration for the set&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;me&quot;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;127.0.0.1:27017&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;ok&quot;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;</span><span class="token string variable" style="color:rgb(191, 199, 213)">$clusterTime</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;clusterTime&quot;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> Timestamp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1594140533</span><span class="token plain">, </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;signature&quot;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;hash&quot;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> BinData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">,</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;AAAAAAAAAAAAAAAAAAAAAAAAAAA=&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;keyId&quot;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> NumberLong</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;operationTime&quot;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> Timestamp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1594140533</span><span class="token plain">, </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">rs0:SECONDARY</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">rs0:PRIMARY</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># &lt;----- This is what you are looking for</span></div></div></div></div></div><ul><li>press <code>ctrl-c</code> to quit mongo</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">rs0:PRIMARY</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">bye</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="set-up-mongo-user-and-password-for-mongodb-and-export-mongodb-url"></a>Set-up Mongo User and Password for MongoDB and export MongoDB URL<a aria-hidden="true" tabindex="-1" class="hash-link" href="#set-up-mongo-user-and-password-for-mongodb-and-export-mongodb-url" title="Direct link to heading">#</a></h2><p>We need to create a user and password for the MongoDb database.</p><p>Initialize <strong>MongoDb</strong> and generate <strong>login password</strong>. (Execute each line separately.)</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token assign-left variable" style="color:rgb(191, 199, 213)">MONGO_PASS</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token variable" style="color:rgb(191, 199, 213)">$(</span><span class="token variable" style="color:rgb(191, 199, 213)">openssl rand -hex </span><span class="token variable number" style="color:rgb(247, 140, 108)">16</span><span class="token variable" style="color:rgb(191, 199, 213)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">echo</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">$MONGO_PASS</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># You should receive output similar to:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># c20fb93b2772598ab483f2fde64292f6</span></div></div></div></div></div><p>Set <code>mongod</code> password and create user in Mongo to set-up security parameters. (Execute as one command.)</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mongo --eval </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;db=db.getSiblingDB(&#x27;admin&#x27;); \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">db.createUser({ user: &#x27;erxes&#x27;, pwd: </span><span class="token string entity" style="color:rgb(195, 232, 141)">\&quot;</span><span class="token string variable" style="color:rgb(191, 199, 213)">$MONGO_PASS</span><span class="token string entity" style="color:rgb(195, 232, 141)">\&quot;</span><span class="token string" style="color:rgb(195, 232, 141)">, roles: [ &#x27;root&#x27; ] })&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div></div></div><p>Verify the MongoDb password set above is correct.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token assign-left variable" style="color:rgb(191, 199, 213)">MONGO_URL</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;mongodb://erxes:</span><span class="token string variable" style="color:rgb(191, 199, 213)">$MONGO_PASS</span><span class="token string" style="color:rgb(195, 232, 141)">@localhost/erxes?authSource=admin\&amp;replicaSet=rs0&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">echo</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">$MONGO_URL</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Output is similar to</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># mongodb://erxes:c20fb93b2772598ab483f2fde64292f6@localhost/erxes?authSource=admin\&amp;replicaSet=rs0</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div></div></div><p>If you get an output similar to the above example, you may continue with installing and configuring NGINX.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="install-and-configure-nginx"></a>Install and configure NGINX<a aria-hidden="true" tabindex="-1" class="hash-link" href="#install-and-configure-nginx" title="Direct link to heading">#</a></h2><p><strong>NGINX</strong> is a very powerful web server. It is often used as a proxy server for emails. For additional <a href="https://www.nginx.com/resources/wiki/start/topics/tutorials/install/" target="_blank" rel="noopener noreferrer">NGINX installation instructions, read this</a>.</p><p>NGINX is installed from the stable repo <a href="https://launchpad.net/~nginx/+archive/ubuntu/stable" target="_blank" rel="noopener noreferrer">https://launchpad.net/~nginx/+archive/ubuntu/stable</a>.</p><p>Add the <strong>PPA</strong> for <strong>NGINX</strong>. Press <code>enter</code> when prompted to continue.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> add-apt-repository ppa:nginx/stable</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Output should be similar to</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># This PPA contains the latest Stable Release version of the nginx web server software.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># **Only Non-End-of-Life Ubuntu Releases are supported in this PPA**</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># **Development releases of Ubuntu are not officially supported by this PPA, and uploads for those will not be available until actual final releases for those versions**</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># More info: https://launchpad.net/~nginx/+archive/ubuntu/stable</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Press </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">ENTER</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> to </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">continue</span><span class="token plain"> or Ctrl-c to cancel adding it.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div></div></div><ul><li><strong>Press Enter</strong> to continue with the installation.</li></ul><p>Install <strong>NGINX</strong> with the following commands.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">apt-get</span><span class="token plain"> update</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">apt-get</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> -y nginx</span></div></div></div></div></div><p><strong>NGINX</strong> started by default when you installed it. But it is recommended to <code>enable</code> and <code>start</code> anyway.</p><p>Enable and start <strong>NGINX</strong></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> systemctl </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">enable</span><span class="token plain"> nginx</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> systemctl start nginx</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="configure-nginx"></a>Configure NGINX<a aria-hidden="true" tabindex="-1" class="hash-link" href="#configure-nginx" title="Direct link to heading">#</a></h3><p>The next step is to configure <strong>NGINX</strong> so that it allows traffic through <code>Ports 80 and 443</code>.</p><p>Ensure the <code>ufw</code> firewall knows about the available applications.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> ufw app list</span></div></div></div></div></div><p>You are expecting the following output:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Available applications:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Nginx Full</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Nginx HTTP</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Nginx HTTPS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  OpenSSH</span></div></div></div></div></div><p>The output should look something like the <code>Available applications</code> output above. <code>Nginx Full</code> should be listed.</p><p>Enable Port 80 and Port 443 to allow traffic.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> ufw allow </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Nginx Full&#x27;</span></div></div></div></div></div><p>Verify that <code>ufw</code> has been updated.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> ufw status</span></div></div></div></div></div><p>You are expecting the following output.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Status: active</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">To                         Action      From</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">--                         ------      ----</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">OpenSSH                    ALLOW       Anywhere</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">80,443</span><span class="token plain">/tcp                 ALLOW       Anywhere</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Nginx Full                 ALLOW       Anywhere</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">OpenSSH </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">v6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">               ALLOW       Anywhere </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">v6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">80,443</span><span class="token plain">/tcp </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">v6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">            ALLOW       Anywhere </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">v6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Nginx Full </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">v6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">            ALLOW       Anywhere </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">v6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><ul><li>Open the <strong>nginx.conf</strong></li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">nano</span><span class="token plain"> /etc/nginx/nginx.conf</span></div></div></div></div></div><ul><li>Uncomment the following line <code>server_names_hash_bucket_size 64;</code></li></ul><p>It should look like this:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-txt codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">http {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    * * *</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    server_names_hash_bucket_size 64;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    * * *</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><ul><li>Save with <code>ctrl + x</code> and then <code>y</code> to accept the changes.</li></ul><p>After saving the file above, you may continue to installing <strong>Certbot</strong>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="install-certbot"></a>Install Certbot<a aria-hidden="true" tabindex="-1" class="hash-link" href="#install-certbot" title="Direct link to heading">#</a></h2><p><strong>Let&#x27;s Encrypt</strong> enables you to use <strong>HTTPS</strong> on your website. It will issue you a certificate which shows that you control your domain. <a href="https://www.nginx.com/resources/wiki/start/topics/tutorials/install/" target="_blank" rel="noopener noreferrer">Let&#x27;s Encrypt additional information</a>.</p><p>You will follow the installation instructions as covered <a href="https://certbot.eff.org/lets-encrypt/ubuntubionic-nginx" target="_blank" rel="noopener noreferrer">here</a>, with <a href="https://certbot.eff.org/" target="_blank" rel="noopener noreferrer">Certbot</a>.</p><p><strong>NOTE:</strong> You are simply installing <strong>Certbot</strong> in these steps, not running or configuring <strong>Certbot</strong>. The <strong>erxes</strong> installation script will execute <strong>Certbot</strong> for the provided domain.</p><ul><li>You will need to add a <strong>Certbot</strong> PPA to the list of repositories on the server. (Run the following commands separately.)</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">apt-get</span><span class="token plain"> update</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">apt-get</span><span class="token plain"> -y </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> software-properties-common</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> add-apt-repository universe</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> add-apt-repository -y ppa:certbot/certbot</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">apt-get</span><span class="token plain"> update</span></div></div></div></div></div><ul><li>Install Certbot</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">apt-get</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> -y certbot python3-certbot-nginx</span></div></div></div></div></div><p>You have now installed <strong>Certbot</strong>. You may continue with installing <strong>PM2</strong> below.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="install-pm2"></a>Install PM2<a aria-hidden="true" tabindex="-1" class="hash-link" href="#install-pm2" title="Direct link to heading">#</a></h2><p><strong>PM2</strong> is a tool that helps you manage and keep <strong>erxes</strong> online. It is a process manager. You can read more about the installation process here: <a href="https://pm2.keymetrics.io/docs/usage/quick-start/" target="_blank" rel="noopener noreferrer">How to install PM2</a></p><ul><li>Install <strong>PM2</strong></li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> pm2@latest -g</span></div></div></div></div></div><ul><li>Check to see if <strong>PM2</strong> is installed correctly.</li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pm2 --version</span></div></div></div></div></div><p>You should get a similar output as below:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token number" style="color:rgb(247, 140, 108)">4.5</span><span class="token plain">.0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># your version of pm2 may be different</span></div></div></div></div></div><p>You should receive a response from <code>pm2 --version</code>. The version should show as last line. You will need <strong>PM2</strong> later in the installation process.</p><p>You have now installed all the dependencies that <strong>erxes</strong> depends on. Continue on with the next steps to install <strong>erxes</strong>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="install-erxes"></a>Install erxes<a aria-hidden="true" tabindex="-1" class="hash-link" href="#install-erxes" title="Direct link to heading">#</a></h2><p>All the dependencies for <strong>erxes</strong> are now installed.</p><p>Execute the following changing <em>my-project</em> to any project name that you would like. This will be the name of the folder where <strong>erxes</strong> is installed.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">yarn</span><span class="token plain"> create erxes-app my-project --mongoUrl</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token variable" style="color:rgb(191, 199, 213)">$MONGO_URL</span></div></div></div></div></div><p>Please enter the exact domain or subdomain name <strong>erxes</strong> will use. For example, <code>example.com</code> or <code>erxes.example.com</code>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#Please enter your domain (localhost):</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Please enter your domain </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">localhost</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">: erxes.example.com</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="rabbitmq-and-redis"></a>RabbitMQ and Redis<a aria-hidden="true" tabindex="-1" class="hash-link" href="#rabbitmq-and-redis" title="Direct link to heading">#</a></h3><p>You will now be asked about using <a href="https://www.rabbitmq.com/" target="_blank" rel="noopener noreferrer">RabbitMQ</a> and <a href="https://redis.io/" target="_blank" rel="noopener noreferrer">Redis</a>. Type <code>yes</code>, if you would like either or both of <strong>RabbitMQ</strong> and <strong>Redis</strong> . Otherwise, type <code>no</code> or press <code>enter</code>.</p><p>(These options are for high traffic installations. If unsure, type <code>no</code>, and you will be able to accept them later at any time.)</p><p><strong>RabbitMQ:</strong></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#Are you using rabbitmq then enter rabbitmq host (optional):</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Are you using rabbitmq </span><span class="token keyword" style="font-style:italic">then</span><span class="token plain"> enter rabbitmq </span><span class="token function" style="color:rgb(130, 170, 255)">host</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">optional</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">: no</span></div></div></div></div></div><p><strong>Redis:</strong></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#Are you using redis then enter redis host (optional):</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Are you using redis </span><span class="token keyword" style="font-style:italic">then</span><span class="token plain"> enter redis </span><span class="token function" style="color:rgb(130, 170, 255)">host</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">optional</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">: no</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="elasticsearch"></a>Elasticsearch<a aria-hidden="true" tabindex="-1" class="hash-link" href="#elasticsearch" title="Direct link to heading">#</a></h3><p><a href="https://www.elastic.co/" target="_blank" rel="noopener noreferrer">Elasticsearch</a> is used to perform the search functions in <strong>erxes</strong>. You will be given a choice of three options:</p><ul><li>You can host <strong>Elasticsearch</strong> on your server (http://localhost:9200) <strong>(Recommended)</strong>,</li><li>Use the free erxes <strong>Elasticsearch</strong> hosted version, or</li><li>Host <strong>Elasticsearch</strong> on it&#x27;s own server (for high traffic installations).</li></ul><p><em>The recommended option is hosting your own <strong>Elasticsearch</strong>.</em></p><p>Navigate using the <strong>Up Arrow â†‘</strong> and <strong>Down Arrow â†“</strong> keys to select the option and then press <strong>Enter</strong> to select.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">? Elasticsearch url ? </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Use arrow keys</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â¯ http://localhost:9200 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">on </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">local</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  https://elasticsearch.erxes.io </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">limited erxes.io offering</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  enter your elasticsearch url</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="connecting-elasticsearch-to-mongodb"></a>Connecting Elasticsearch to MongoDb<a aria-hidden="true" tabindex="-1" class="hash-link" href="#connecting-elasticsearch-to-mongodb" title="Direct link to heading">#</a></h3><p>This is an <strong>Advanced Option</strong>. It is possible to create unique processes to sync <strong>Elasticsearch</strong> with <strong>MongoDB</strong>. Unless you know what you&#x27;re doing, select the first option, <em>Using mongo change stream</em> by pressing <strong>Enter</strong>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">? How </span><span class="token keyword" style="font-style:italic">do</span><span class="token plain"> you want to </span><span class="token function" style="color:rgb(130, 170, 255)">sync</span><span class="token plain"> mongo to elasticsearch ? </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Use arrow keys</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â¯ Using mongo change stream</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Using seperate process written </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> python </span><span class="token function" style="color:rgb(130, 170, 255)">which</span><span class="token plain"> requires </span><span class="token function" style="color:rgb(130, 170, 255)">more</span><span class="token plain"> specs and </span><span class="token function" style="color:rgb(130, 170, 255)">more</span><span class="token plain"> dependencies</span></div></div></div></div></div><p>When <strong>erxes</strong> has successfully been installed, you may continue and copy the <code>NGINX Config file</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="start-erxes-and-running-processes"></a>Start erxes and running processes<a aria-hidden="true" tabindex="-1" class="hash-link" href="#start-erxes-and-running-processes" title="Direct link to heading">#</a></h3><p>You will now finish the installation steps for <strong>erxes</strong>. And then you will take a new <code>nginx.conf</code> file (configured for your domain and other settings) and copy this new file and to replace the existing one.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> my-project</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">yarn</span><span class="token plain"> start</span></div></div></div></div></div><p>Yarn will automatically finished the installation process. You should see the following success message in your terminal.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bashrc codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"> __        __   _                            _          _____</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> \ \      / /__| | ___ ___  _ __ ___   ___  | |_ ___   | ____|_ ____  _____  ___</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  \ \ /\ / / _ \ |/ __/ _ \| &#x27;_ ` _ \ / _ \ | __/ _ \  |  _| | &#x27;__\ \/ / _ \/ __|</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   \ V  V /  __/ | (_| (_) | | | | | |  __/ | || (_) | | |___| |   &gt;  &lt;  __/\__ \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    \_/\_/ \___|_|\___\___/|_| |_| |_|\___|  \__\___/  |_____|_|  /_/\_\___||___/</span></div></div></div></div></div><p>Next, verify all processes are correctly running, but executing the <code>pm2 list</code> command.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pm2 list</span></div></div></div></div></div><p>The output should match the following:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bashrc codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># expected output:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚ id â”‚ name               â”‚ mode     â”‚ â†º    â”‚ status    â”‚ cpu      â”‚ memory   â”‚</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚ 0  â”‚ api                â”‚ fork     â”‚ 0    â”‚ online    â”‚ 0%       â”‚ 100.3mb  â”‚</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚ 1  â”‚ cronjobs           â”‚ fork     â”‚ 0    â”‚ online    â”‚ 0%       â”‚ 94.9mb   â”‚</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚ 6  â”‚ email-verifier     â”‚ fork     â”‚ 11   â”‚ online    â”‚ 0%       â”‚ 88.1mb   â”‚</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚ 4  â”‚ engages            â”‚ fork     â”‚ 0    â”‚ online    â”‚ 0%       â”‚ 59.7mb   â”‚</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚ 3  â”‚ integrations       â”‚ fork     â”‚ 0    â”‚ online    â”‚ 0%       â”‚ 90.2mb   â”‚</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚ 5  â”‚ logger             â”‚ fork     â”‚ 0    â”‚ online    â”‚ 0%       â”‚ 56.8mb   â”‚</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚ 7  â”‚ ui                 â”‚ fork     â”‚ 0    â”‚ online    â”‚ 0%       â”‚ 37.8mb   â”‚</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚ 8  â”‚ widgets            â”‚ fork     â”‚ 0    â”‚ online    â”‚ 0%       â”‚ 42.8mb   â”‚</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚ 2  â”‚ workers            â”‚ fork     â”‚ 0    â”‚ online    â”‚ 0%       â”‚ 94.6mb   â”‚</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="copy-nginx-config-files"></a>Copy NGINX Config files<a aria-hidden="true" tabindex="-1" class="hash-link" href="#copy-nginx-config-files" title="Direct link to heading">#</a></h3><p>Execute the following commands to copy the properly configured <code>nginx.conf</code> files and ensure your domain can receive traffic on this server.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">## nginx.conf</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">cp</span><span class="token plain"> nginx.conf /etc/nginx/sites-available/default</span></div></div></div></div></div><p>Test the <strong>NGINX</strong> configuration to make sure you don&#x27;t have any errors</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> nginx -t</span></div></div></div></div></div><p>You should see the following output:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">nginx: the configuration </span><span class="token function" style="color:rgb(130, 170, 255)">file</span><span class="token plain"> /etc/nginx/nginx.conf syntax is ok</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">nginx: configuration </span><span class="token function" style="color:rgb(130, 170, 255)">file</span><span class="token plain"> /etc/nginx/nginx.conf </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">test</span><span class="token plain"> is successful</span></div></div></div></div></div><p>If you got no errors, reload nginx service.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> systemctl reload nginx</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="execute-and-configure-certbot"></a>Execute and configure Certbot<a aria-hidden="true" tabindex="-1" class="hash-link" href="#execute-and-configure-certbot" title="Direct link to heading">#</a></h2><p>Execute the previously installed Certbot.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> certbot --nginx</span></div></div></div></div></div><p>You will asked several questions, you can answer as follows:</p><ul><li>Enter your email address</li><li>Agree with the <strong>Terms of Service</strong></li><li>Answer <code>Yes</code> or <code>No</code>, if you want to share your email address with the Electronic Frontier Foundation</li><li>Select the corresponding number associated with your domain name, usually <code>1</code></li><li>Choose <code>2</code> to redirect all your traffic to a secure <strong>HTTPS</strong></li></ul><p>Now run the following to <strong>test and set-up</strong> automatic renewal of your 90 day certbot. This needs to succeed so that your renewals are automatic.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> certbot renew --dry-run</span></div></div></div></div></div><p>Check your website in the browser. You should see the <strong>Secure Padlock</strong> next to your URL. You are now ready to create a new user and log in.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="congratulations-time-to-log-in"></a>Congratulations, time to log in<a aria-hidden="true" tabindex="-1" class="hash-link" href="#congratulations-time-to-log-in" title="Direct link to heading">#</a></h2><p>You have installed <strong>erxes</strong>. You may now visit your url and complete the <strong>Initial Configuration Steps</strong>.</p><p>We recommend opting-in to the newsletter and email update notifications to receive immediate notifications of important updates, instructions, and new tutorials.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/erxes/erxes/edit/develop/docs/docs/installation/ubuntu-step-by-step.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2020-11-29T18:18:36.000Z" class="docLastUpdatedAt_217_">11/29/2020</time> by <strong>davidkartuzinski</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/installation/upgrade-minimal-server"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Upgrade from Minimum Server</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/installation/dns-configuration"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">How to configure your DNS records Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#installing-the-community-edition" class="table-of-contents__link">Installing the Community Edition</a></li><li><a href="#setting-up-a-server-with-ubuntu-1804" class="table-of-contents__link">Setting up a server with Ubuntu 18.04</a></li><li><a href="#log-into-server-as-root-and-create-erxes-user" class="table-of-contents__link">Log into server as root and create erxes user</a></li><li><a href="#set-up-a-basic-firewall-for-ssh-nginx-80-and-port-443" class="table-of-contents__link">Set-up a basic firewall for SSH, nginx 80 and port 443</a><ul><li><a href="#basic-firewall---port-22" class="table-of-contents__link">Basic Firewall - Port 22</a></li><li><a href="#http--https---port-80--port-443" class="table-of-contents__link">HTTP &amp; HTTPS - Port 80 &amp; Port 443</a></li></ul></li><li><a href="#allow-the-erxes-user-to-ssh-into-server" class="table-of-contents__link">Allow the &quot;erxes&quot; user to <strong>SSH</strong> into server</a></li><li><a href="#log-in-to-your-server-as-the-erxes-user" class="table-of-contents__link">Log in to your server as the &quot;erxes&quot; user.</a></li><li><a href="#nvm-install" class="table-of-contents__link">Nvm install</a></li><li><a href="#install-nodejs-with-nvm" class="table-of-contents__link">Install Node.js with nvm</a></li><li><a href="#yarn-install" class="table-of-contents__link">Yarn install</a></li><li><a href="#install-mongodb" class="table-of-contents__link">Install MongoDB</a><ul><li><a href="#deploy-a-mongodb-replica-set" class="table-of-contents__link">Deploy a MongoDB Replica Set</a></li></ul></li><li><a href="#set-up-mongo-user-and-password-for-mongodb-and-export-mongodb-url" class="table-of-contents__link">Set-up Mongo User and Password for MongoDB and export MongoDB URL</a></li><li><a href="#install-and-configure-nginx" class="table-of-contents__link">Install and configure NGINX</a><ul><li><a href="#configure-nginx" class="table-of-contents__link">Configure NGINX</a></li></ul></li><li><a href="#install-certbot" class="table-of-contents__link">Install Certbot</a></li><li><a href="#install-pm2" class="table-of-contents__link">Install PM2</a></li><li><a href="#install-erxes" class="table-of-contents__link">Install erxes</a><ul><li><a href="#rabbitmq-and-redis" class="table-of-contents__link">RabbitMQ and Redis</a></li><li><a href="#elasticsearch" class="table-of-contents__link">Elasticsearch</a></li><li><a href="#connecting-elasticsearch-to-mongodb" class="table-of-contents__link">Connecting Elasticsearch to MongoDb</a></li><li><a href="#start-erxes-and-running-processes" class="table-of-contents__link">Start erxes and running processes</a></li><li><a href="#copy-nginx-config-files" class="table-of-contents__link">Copy NGINX Config files</a></li></ul></li><li><a href="#execute-and-configure-certbot" class="table-of-contents__link">Execute and configure Certbot</a></li><li><a href="#congratulations-time-to-log-in" class="table-of-contents__link">Congratulations, time to log in</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/overview/getting-started/">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/installation/docker/">Installation Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/administrator/creating-first-user">Administrator`s Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/developer/developer">Developers Guide</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Company</h4><ul class="footer__items"><li class="footer__item"><a href="https://erxes.io/team" target="_blank" rel="noopener noreferrer" class="footer__link-item">About us</a></li><li class="footer__item"><a href="https://erxes.io/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://trello.com/b/jTjXaI28/erxes-inc-roadmap" target="_blank" rel="noopener noreferrer" class="footer__link-item">Roadmap</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://community.erxes.io/register/Gw4WRJnk9fSbyAXTq" target="_blank" rel="noopener noreferrer" class="footer__link-item">Join our community chat</a></li><li class="footer__item"><a href="https://www.facebook.com/groups/erxescommunity" target="_blank" rel="noopener noreferrer" class="footer__link-item">Join our facebook group</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Support The erxes</h4><ul class="footer__items"><li class="footer__item"><a href="https://opencollective.com/erxes" target="_blank" rel="noopener noreferrer" class="footer__link-item">Back us on Open Collective</a></li><li class="footer__item"><a href="https://github.com/sponsors/erxes" target="_blank" rel="noopener noreferrer" class="footer__link-item">Back us on Github</a></li></ul></div></div><div class="text--center"><div class="margin-bottom--sm"><a href="https://erxes.io" target="_blank" rel="noopener noreferrer" class="footerLogoLink_1zJy"><img class="footer__logo" alt="erxes Open Source Logo" src="/img/logo.svg"></a></div><div>Copyright Â© 2020 erxes Inc.</div></div></div></footer></div>
<script src="/styles.f79eea94.js"></script>
<script src="/runtime~main.0d04a286.js"></script>
<script src="/main.0324d8bb.js"></script>
<script src="/1.6cbf34a8.js"></script>
<script src="/2.09dfe545.js"></script>
<script src="/0148e278.f240f260.js"></script>
<script src="/01a85c17.49a0c86e.js"></script>
<script src="/073c8191.9acc6f27.js"></script>
<script src="/0b5952ed.d2151753.js"></script>
<script src="/650081ca.dd062294.js"></script>
<script src="/6875c492.02102129.js"></script>
<script src="/a6aa9e1f.bd0ede83.js"></script>
<script src="/ab53c634.3d0aed51.js"></script>
<script src="/c4f5d8e4.dc86f455.js"></script>
<script src="/ccc49370.5ac238c3.js"></script>
<script src="/84.81d30d46.js"></script>
<script src="/83.ca7809d5.js"></script>
<script src="/935f2afb.eb387ee5.js"></script>
<script src="/17896441.e69f0c76.js"></script>
<script src="/0f1107fe.48fbf937.js"></script>
</body>
</html>